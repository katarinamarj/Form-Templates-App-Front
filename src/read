<div>
  <h2>{{ newFormTemplate.id ? 'Edit Template' : 'Create New Form Template' }}</h2>

  <!-- Forma za kreiranje ili izmenu šablona -->
  <form (ngSubmit)="saveTemplate()">
    <mat-form-field>
      <mat-label>Name</mat-label>
      <input matInput id="name" type="text" [(ngModel)]="newFormTemplate.name" name="name" placeholder="Enter template name" required #nameInput="ngModel">
      <mat-error *ngIf="nameInput.hasError('required')">Name is required</mat-error>
    </mat-form-field>
    
    <mat-form-field>
      <mat-label>Description</mat-label>
      <textarea matInput id="description" [(ngModel)]="newFormTemplate.description" name="description" placeholder="Enter template description" #descriptionInput="ngModel" rows="3"></textarea>
      <mat-error *ngIf="descriptionInput.hasError('maxlength')">
        Description cannot exceed 250 characters
      </mat-error>
    </mat-form-field>

    <!-- Sekcija za dodavanje polja -->
    <h3>Form Fields</h3>
    <div>
      <mat-form-field>
        <mat-label>Field Label</mat-label>
        <input matInput [(ngModel)]="newField.label" name="fieldLabel" placeholder="Enter field label">
      </mat-form-field>

      <mat-form-field>
        <mat-label>Field Type</mat-label>
        <mat-select [(ngModel)]="newField.type" name="fieldType" placeholder="Select field type">
          <mat-option value="text">Free Text</mat-option>
          <mat-option value="checkbox">Checkbox</mat-option>
          <mat-option value="dropdown">Dropdown</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field *ngIf="newField.type === 'dropdown'">
        <mat-label>Dropdown Options</mat-label>
        <input matInput [(ngModel)]="newField.options" name="fieldOptions" placeholder="Enter options, separated by commas">
      </mat-form-field>

      <button mat-raised-button color="primary" (click)="addField()">Add Field</button>
    </div>

    <!-- Tabela sa poljima -->
    <table mat-table [dataSource]="newFormTemplate.fields"  class="mat-elevation-z8" style="width: 100%; margin-top: 20px;">
      <ng-container matColumnDef="label">
        <th mat-header-cell *matHeaderCellDef>Label</th>
        <td mat-cell *matCellDef="let field">{{ field.label }}</td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>Type</th>
        <td mat-cell *matCellDef="let field">{{ field.type }}</td>
      </ng-container>

      <ng-container matColumnDef="options">
        <th mat-header-cell *matHeaderCellDef>Options</th>
        <td mat-cell *matCellDef="let field">{{ field.options }}</td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let field">
          <button mat-button color="primary" (click)="editField(field)" type="button">Edit</button>
          <button mat-button color="warn" (click)="deleteField(field)" type="button">Delete</button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['label', 'type', 'options', 'actions']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['label', 'type', 'options', 'actions'];"></tr>
    </table>

    <!-- Dugme za čuvanje šablona -->
    <button type="submit" mat-raised-button color="primary" style="margin-top: 10px; background-color: rgb(59, 48, 49); width: 200px;">
      {{ newFormTemplate.id ? 'Update Template' : 'Create Template' }}
    </button>
  </form>

  
  
  <h2>Templates</h2>
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="width: 100%; margin-top: 20px;">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let template">{{ template.name }}</td>
    </ng-container>

    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Description</th>
      <td mat-cell *matCellDef="let template">{{ template.description }}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let template">
        <button mat-button color="primary" (click)="editTemplate(template)">Edit</button>
        <button mat-button color="warn" (click)="deleteTemplate(template.id)">Delete</button>
        <button mat-button color="warn">Preview</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['name', 'description', 'actions']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['name', 'description', 'actions'];"></tr>
  </table>
  <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
  

</div>




form {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    width: 40%; 
    margin: 0 auto 10px auto
    
  }
  
  
  h2 {
    text-align: center;
    margin-bottom: 30px;
    font-size: 2em; 
    color: rgb(59, 48, 49); 
  }
  
  mat-form-field {
    width: 80%; 
    margin-bottom: 10px;
  }
  
  button[type="submit"]{
    font-size: 1.2em; 
    padding: 10px;
    width: 30%; 
  }
  
  table {
    border-collapse: collapse;
    table-layout: fixed;
    margin-bottom: 30px;
  }
  
  table th, table td {
    border: 1px solid #ccc;
    padding: 10px;
    text-align: left;
    word-wrap: break-word;
    text-align: center;
    vertical-align: middle;
  }
  
  table th {
    background-color: #f4f4f4;
    font-weight: bold;
    text-align: center;
  
  }
  
  table td {
    overflow-wrap: break-word; 
  }
  
  table tr {
    border-bottom: 1px solid #ccc;
  }
    
  
  
  
  